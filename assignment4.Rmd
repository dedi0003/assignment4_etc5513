---
title: "Zomato - Best of Melbourne Analysis"
author:
- familyname: Editya
  othernames: Dea Avega
  address: Monash University
  email: XXX
  correspondingauthor: true
  qualifications: Master of BA 
- familyname: Qasim
  othernames: Muhammad Soban
  address: Monash University
  qualifications: Master of BA
- familyname: Sinha 
  othernames: Abhishek
  address: Monash University
  email: XXX
  correspondingauthor: true
  qualifications:  Master of BA
- familyname: Vu 
  othernames: Vinny
  address: Monash University
  email: vvuu0009@student.monash.edu
  correspondingauthor: true
  qualifications:  Master of BA
department: Our consultancy \newline add names &\newline add names
organization: ETC5513 Collaborative and Reproductible Practices 
bibliography: references.bib
biblio-style: authoryear-comp
linestretch: 1.5
output:
  bookdown::pdf_document2:
    template: monashreport2.tex
    fig_caption: yes
    fig_height: 5
    fig_width: 8
    includes:
      in_header: preamble.tex
    keep_tex: yes
    number_sections: yes
    citation_package: biblatex
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      cache=FALSE, 
                      messages=FALSE, 
                      warning=FALSE)

library(romato)
library(dplyr)
library(tidyverse)
library(ggplot2)
library(leaflet)
library(rgdal)
library(readr)
library(mapview)
library(viridis)
library(kableExtra)
library(knitr)
```

\section*{Popularity of different cuisines in Melbourne} 

```{r assigning API, echo = FALSE, include = FALSE, message = FALSE, warning = FALSE}
zmt <- zomato$new("1623b413d3a1614e765de7578f83a10b") #assign API key
```

# Get the data from romato

```{r read data, echo = FALSE, include = FALSE, message = FALSE, warning = FALSE}

# pull data for category "Best of Melbourne" using Melbourne ID "259"
melb <- zmt$search(entity_id = "259", entity_type = "city", category = "Best of Melbourne") 

#search restaurant around CBD
melb_top100 <- melb %>% 
  mutate(aggregate_rating = as.numeric(aggregate_rating), price_range = as.numeric(price_range), longitude = as.numeric(longitude), latitude = as.numeric(latitude))

```

```{r wrangling, echo=FALSE, include=FALSE}
melb_top100 <- melb_top100 %>% mutate(Types_of_cuisine=melb_top100$cuisines)

temp_1 <- as.data.frame(melb_top100$cuisines[grep("Japanese", melb_top100$cuisines)])
temp_2 <- as.data.frame(melb_top100$cuisines[grep("Chinese", melb_top100$cuisines)])
temp_3 <- as.data.frame(melb_top100$cuisines[grep("Korean", melb_top100$cuisines)])
temp_4 <- as.data.frame(melb_top100$cuisines[grep("Italian", melb_top100$cuisines)])
temp_5 <- as.data.frame(melb_top100$cuisines[grep("Australian", melb_top100$cuisines)])
temp_6 <- as.data.frame(melb_top100$cuisines[grep("Coffee", melb_top100$cuisines)])

for (i in seq_along(melb_top100$Types_of_cuisine)) {
    melb_top100$Types_of_cuisine[[i]][melb_top100$Types_of_cuisine[[i]] %in% temp_1$`melb_top100$cuisines[grep("Japanese", melb_top100$cuisines)]`] <- "Japanese"
    melb_top100$Types_of_cuisine[[i]][melb_top100$Types_of_cuisine[[i]] %in% temp_2$`melb_top100$cuisines[grep("Chinese", melb_top100$cuisines)]`] <- "Chinese"
    melb_top100$Types_of_cuisine[[i]][melb_top100$Types_of_cuisine[[i]] %in% temp_3$`melb_top100$cuisines[grep("Korean", melb_top100$cuisines)]`] <- "Korean"
    melb_top100$Types_of_cuisine[[i]][melb_top100$Types_of_cuisine[[i]] %in% temp_4$`melb_top100$cuisines[grep("Italian", melb_top100$cuisines)]`] <- "Italian"
    melb_top100$Types_of_cuisine[[i]][melb_top100$Types_of_cuisine[[i]] %in% temp_5$`melb_top100$cuisines[grep("Australian", melb_top100$cuisines)]`] <- "Australian"
    melb_top100$Types_of_cuisine[[i]][melb_top100$Types_of_cuisine[[i]] %in% temp_6$`melb_top100$cuisines[grep("Coffee", melb_top100$cuisines)]`] <- "Cafes"
}

melb_top100
```

```{r Cuisine-Type, echo = FALSE, fig.cap = "Number of restaurants for different Cuisines in Melbourne"}
cuisines_melb <- melb_top100 %>%
  select(Types_of_cuisine)%>%
  group_by(Types_of_cuisine)%>%
  count() %>%
  arrange(desc(n))

cuisines_melb %>%
  ggplot(aes(x = n, y = Types_of_cuisine))+
           geom_bar(stat = "identity")+
  xlab("Count")
```

From Figure \@ref(fig:Cuisine-Type), we can see that Japanese cuisine dominates the Melbourne CBD area, with more than 25 restaurants. Korean and Chinese cuisine are second popular with more than 10 restaurants serving these cuisine in the CBD Area. Also we see that CBD has lots of Cafes which can be related to the nature of the area given that CBD is a business hub with a fast pace environment. Demand for Take aways and quick meals are high. While many people still rely on a quick takeaway on their way to work or on a break from the office, many cafeâ€™s have transformed into restaurants and dining spaces where people can enjoy their hot beverage over a meal or even just to sit down with friends or work colleagues.

```{r Cuisine-Votes, echo = FALSE, fig.cap = "Number of Votes for different Cuisines in Melbourne"}
#glimpse(melb_top100)
melb_top100$votes <- as.double(melb_top100$votes)

cuisines_melb_ratings <- melb_top100 %>%
  select(Types_of_cuisine, votes)%>%
  group_by(Types_of_cuisine)%>%
  summarise(Total_Votes = sum(votes)) %>%
  arrange(desc(Total_Votes))

cuisines_melb_ratings %>%
  ggplot(aes(x = Total_Votes, y = Types_of_cuisine))+
           geom_bar(stat = "identity", fill= "blue")
```

