---
title: "Zomato - Best of Melbourne Analysis"
author:
- familyname: Editya
  othernames: Dea Avega
  address: Monash University
  email: XXX
  correspondingauthor: true
  qualifications: Master of BA 
- familyname: Qasim
  othernames: Muhammad Soban
  address: Monash University
  qualifications: Master of BA
- familyname: Sinha 
  othernames: Abhishek
  address: Monash University
  email: XXX
  correspondingauthor: true
  qualifications:  Master of BA
- familyname: Vu 
  othernames: Vinny
  address: Monash University
  email: vvuu0009@student.monash.edu
  correspondingauthor: true
  qualifications:  Master of BA
department: Our consultancy \newline add names &\newline add names
organization: ETC5513 Collaborative and Reproductible Practices 
bibliography: references.bib
biblio-style: authoryear-comp
linestretch: 1.5
output:
  bookdown::pdf_document2:
    template: monashreport2.tex
    fig_caption: yes
    fig_height: 5
    fig_width: 8
    includes:
      in_header: preamble.tex
    keep_tex: yes
    number_sections: yes
    citation_package: biblatex
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      cache=FALSE, 
                      messages=FALSE, 
                      warning=FALSE)

library(romato)
library(dplyr)
library(tidyverse)
library(ggplot2)
library(leaflet)
library(rgdal)
library(readr)
library(mapview)
library(viridis)
library(kableExtra)

```

```{r wrangling}
# assign API key
zmt <- zomato$new("1623b413d3a1614e765de7578f83a10b") 

# pull data for category "Best of Melbourne" using Melbourne ID "259"
melb <- zmt$search(entity_id = "259", entity_type = "city", category = "Best of Melbourne")

melb_top100 <- melb %>% 
  select(-offers, -establishment_types, -all_reviews.reviews, -highlights) %>% 
  mutate(aggregate_rating = as.numeric(aggregate_rating), price_range = as.numeric(price_range), longitude = as.numeric(longitude), latitude = as.numeric(latitude))

```

\section*{Introduction} 

In this report we have used the following packages @tidyverse, @romato, @kableExtra, @knitr, @leaflet, @rgdal. 

\section*{Scattered Plot Map}
This report will look at the distribution of best restaurants (having rating equals to and more than 4.8) in Melbourne using shape maps.

```{r include=FALSE}


# melb_top100 %>% 
#   select(name, aggregate_rating, rating_text, address) %>% 
#   group_by() %>% 
#   arrange(desc(aggregate_rating)) %>% 
#   head(20)

melb_best <- melb_top100 %>% 
  filter(aggregate_rating >= 4.8)
```


```{r best-restaurant, echo=FALSE}
melb_11 <- melb_best %>% 
  select(name, locality, price_for_two = average_cost_for_two, cuisines, rating = aggregate_rating) %>% 
  filter(rating >= 4.8) %>% 
  group_by(locality) %>% 
  kable(caption = "Top Eleven Best Restaurant in Melbourne") %>% 
  kableExtra::kable_styling(latex_options = c("striped"), font_size = 8)

melb_11
```

As shown in table \@ref(tab:best-restaurant) above, there are eleven restaurants which have rating equals and more than 4.8 hence can be categorised as best of the best in Melbourne.

```{r price-map, fig.cap="Best of Melbourne", out.width= "100%", cache= TRUE, echo = FALSE}

pal <- colorFactor(palette = "viridis", melb_best$average_cost_for_two)

map_melb <- leaflet(melb_best) %>%
  addTiles() %>% 
  addProviderTiles(providers$CartoDB.Positron) %>% 
  addCircleMarkers(lng = melb_best$longitude, 
                   lat = melb_best$latitude, 
                   label = melb_best$name,
  labelOptions = labelOptions(textOnly = T, noHide = T, textsize = "12px"),
  radius = ~ifelse(melb_best$average_cost_for_two <= 50, 5, 8),
  color = ~pal(melb_best$average_cost_for_two),
  stroke = FALSE, fillOpacity = 0.5
  ) %>% 
  setView(lng = 144.946457, lat = -37.840935, zoom = 11) #Vic map


map_melb

```


As we can see from figure \@ref(fig:price-map) above, that CBD, Fitzroy and North Melbourne both have two restaurans which are included in the top rating list. There is only one restaurant which located outside the CBD, which is **Shira Nui** where located in Glen Waverley area.
The map also shows whether the restaurant is expensive or not which indicated by larger circle if the average price for two persons is above $50.
