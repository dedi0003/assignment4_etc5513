---
title: "Zomato - Best of Melbourne Analysis"
author:
- familyname: Editya
  othernames: Dea Avega
  address: Monash University
  email: XXX
  correspondingauthor: true
  qualifications: Master of BA 
- familyname: Qasim
  othernames: Muhammad Soban
  address: Monash University
  qualifications: Master of BA
- familyname: Sinha 
  othernames: Abhishek
  address: Monash University
  email: XXX
  correspondingauthor: true
  qualifications:  Master of BA
- familyname: Vu 
  othernames: Vinny
  address: Monash University
  email: vvuu0009@student.monash.edu
  correspondingauthor: true
  qualifications:  Master of BA
department: Our consultancy \newline add names &\newline add names
organization: ETC5513 Collaborative and Reproductible Practices 
bibliography: references.bib
biblio-style: authoryear-comp
linestretch: 1.5
output:
  bookdown::pdf_document2:
    template: monashreport2.tex
    fig_caption: yes
    fig_height: 5
    fig_width: 8
    includes:
      in_header: preamble.tex
    keep_tex: yes
    number_sections: yes
    citation_package: biblatex
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      cache=FALSE, 
                      messages=FALSE, 
                      warning=FALSE)
library(romato)
library(dplyr)
library(tidyverse)
library(ggplot2)
library(leaflet)
library(rgdal)
library(readr)
library(mapview)
library(viridis)
library(kableExtra)
library(knitr)
```

```{r , include=FALSE}
zmt <- zomato$new("1623b413d3a1614e765de7578f83a10b") #assign API key
```

```{r , include=FALSE}
# pull data for category "Best of Melbourne" using Melbourne ID "259"
melb <- zmt$search(entity_id = "259", entity_type = "city", category = "Best of Melbourne") 

melb_top100 <- melb %>% 
  mutate(aggregate_rating = as.numeric(aggregate_rating), price_range = as.numeric(price_range), longitude = as.numeric(longitude), latitude = as.numeric(latitude))


melb_top100


```

```{r , include=FALSE}
# viewing "Best of Melbourne" data
melb_top100_filter <- melb_top100 %>%  
  select(name, cuisines, average_cost_for_two, price_range, establishment,all_reviews_count, locality, aggregate_rating, rating_text, address) %>%
  mutate(establishment = as.character(establishment))


melb_top100_filter %>%
  arrange(desc(aggregate_rating)) %>% 
  head(20)
```

\clearpage

\section*{Introduction} 

For this assignment we will be looking at scrapping data from Zomato, one of the largest foods aggregators in the world @zomato. Zomato provides information on restaurants including, price, location, reviews and more. For the purposes on our analysis we will be looking at the best of Melbourne list @zomatomelb to gain insight into some of the most popular restaurants in Melbourne.   

This report will include four sections looking at:

* Is expensive food better than cheap food?
* Popularity of different cuisine in Melbourne
* Exploring gluten free food/restaurants in Melbourne
* Distribution of the top 10 restaurants in Melbourne

In this report we have used the following packages @tidyverse, @romato, @kableExtra, @knitr, @dplyr, @ggplot2, @leaflet, @rgdal, @readr, @mapview, @viridis. 


\section*{Is expensive food better than cheap food?}

In this section we will be using the Zomato Best of Melbourne to explore whether expensive food is "better" than cheap food. To conduct this analysis, we will be looking at:

* What is considered cheap and expensive food
* What the breakdown of price ranges of the restaurants is
* Comparing prices and aggregate ratings 
* Determining whether there is a relationship between prices and ratings

### What is considered cheap and expensive food?

```{r price-ranges,fig.cap= "Price Ranges"}
melb_top100_filter %>%
  mutate(price_range = as.factor(price_range)) %>%
  ggplot(aes(reorder(x=price_range, average_cost_for_two), 
             y = average_cost_for_two, 
             fill = price_range)) +
  geom_boxplot() + 
  labs(title = "Price Ranges",
       x = "Price Range",
       y = "Average Cost for Two",
       fill = "Price Range")
```

From Figure \@ref(fig:price-ranges) we can see Zomato breaks down price ranges into 4 categories with 4 being the most expensive to 1 being the least expensive.

```{r ,include=FALSE}
price_range <- melb_top100_filter %>%
  group_by(price_range) %>%
  summarise(Maximum = max(average_cost_for_two),
            Median = median(average_cost_for_two),
            Minimum = min(average_cost_for_two),
            Range = max(average_cost_for_two)-min(average_cost_for_two))

```

```{r price-range-table, fig.cap= "Price Ranges"}

price_range %>% rename(`Price Range` = price_range) %>% 
  kable(caption = "Price Ranges") %>%
  kable_styling(bootstrap_options = "striped",
                latex_options = "hold_position")
  
```

From Table \@ref(tab:price-range-table) we can see the range of prices that make up each price category.

### What the breakdown of price ranges of the restaurants? 

```{r price-range-count, fig.cap= "Price Range Counts"}
melb_top100_filter %>%
  mutate(price_range = as.factor(price_range)) %>%
  select(name, price_range)%>%
  group_by(price_range)%>%
  count() %>% 
  ggplot(aes(x = price_range, 
             y = n,
             fill = price_range)) +
  geom_bar(stat = "identity", 
           colour = "black") +
  labs(title = "Price Range Counts",
       x = "Price Range",
       y = "Count",
       fill = "Price Range")
```

From Figure \@ref(fig:price-range-count) We can see price range 3 has the most counts. One thing to note however is price range 3 has a range of $40 compared to 1 and 2 which is $10 and $15, respectively. It may be unfair to conclude there is a higher count of more expensive food as the ranges included in the expensive ranges are larger than the lower ones. 

### Comparing prices and aggregate ratings

```{r price-ratings, fig.cap= "Price Ranges to Aggregate Ratings"}
melb_top100_filter %>% 
  mutate(price_range = as.factor(price_range)) %>%
  ggplot(aes(x = price_range, y = aggregate_rating, fill = price_range)) +
  geom_boxplot() + 
  labs(title = "Price Ranges to Aggregate Ratings",
       x = "Price Range",
       y = "Aggregate Rating",
       fill = "Price Range")
```

From Figure \@ref(fig:price-ratings) we can see the median aggregate rating for price range 1 is the highest. In fact, we can see a large amount of lower priced restaurants outranking higher priced restaurants in terms of aggregate ratings.

### Is there a relationship between prices and ratings 

```{r cost-rating-relationship, fig.cap= "Average Cost for Two to Aggregate Rating Relationship"}
melb_top100_filter %>%
  select(name, average_cost_for_two,aggregate_rating) %>%
  mutate(average_cost_for_two = as.numeric(average_cost_for_two)) %>%
  ggplot(aes(x = average_cost_for_two,
             y = aggregate_rating)) +
  geom_point() +
  geom_smooth() +
  labs(title = "Average Cost for Two to Aggregate Rating Relationship",
       x = "Average Cost for Two",
       y = "Aggregate Rating")
```

From Figure \@ref(fig:cost-rating-relationship) we can see there is not a strong relationship between the average cost for two and the aggregate ratings suggesting there is no relationship between price and food quality. We see a slight upwards trend at the higher price levels. However, this is only based on 5 restaurants with drastically higher prices. We see most of the restaurants fall below the $200 price point. This might even suggest lower priced restaurants out rank the higher priced restaurants due to the higher count.


```{r , include = FALSE}
rating <- melb_top100_filter %>%
  group_by(rating_text) %>%
  summarise(Maximum = max(aggregate_rating),
            Minimum = min(aggregate_rating))


```

```{r rating-ranges, fig.cap= "Rating Ratings"}
rating %>% 
  rename(`Rating Text` = rating_text) %>%
  kable(caption = "Rating Ranges") %>%
  kable_styling(bootstrap_options = "striped",
                latex_options = "hold_position")
  
```

Table \@ref(tab:rating-ranges) shows range of aggregate ratings that make up each rating levels.

```{r rating-count, fig.cap= "Average Rating Count"}
melb_top100_filter$rating_text <- factor(melb_top100_filter$rating_text, levels = c("Average", "Good", "Very Good", "Excellent"))
melb_top100_filter %>%
  mutate(price_range = as.factor(price_range)) %>%
  group_by(price_range, rating_text) %>%
  count(na.rm = TRUE) %>%
  ggplot(aes(x = rating_text,
             y = n,
             fill = price_range)) +
  geom_bar(position = "dodge", stat = "identity", colour = "black") +
  labs(title = "Average Rating Count",
       x = "Average Rating",
       y = "Count",
       fill = "Price Range")
```

From Figure \@ref(fig:rating-count) we can see restaurants in the second and fourth price category all rank in either the very good or excellent category. 3 has the highest count in all categories, however, this may be due to the higher count. We see all price levels have restaurants with high ratings.  

### Conclusion

From this analysis we find there is no real relationship between restaurant prices and quality suggesting expensive food is not better than cheap.